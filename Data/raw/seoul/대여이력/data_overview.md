# 🚲 서울시 따릉이 – **대여 이력(개별 이용 기록) API 스키마**

서울시 열린데이터광장에서 제공하는 **따릉이 개별 대여 이력(raw trip log)** 데이터의  
출력값(Output) 스키마를 정리한 문서입니다.  
이는 가장 상세한 단위의 데이터로, **개별 이용자 1회 대여~반납**에 대한 정보를 포함합니다.

---

## 📌 공통 출력 필드 (Common Fields)

| 구분 | 필드명 | 설명 |
|------|--------|------|
| 공통 | `list_total_count` | 총 데이터 건수(정상 조회 시 출력) |
| 공통 | `RESULT.CODE` | 요청 결과 코드 |
| 공통 | `RESULT.MESSAGE` | 요청 결과 메시지 |

---

# 📂 대여 이력 필드 상세 설명 (Trip Log Fields)

| 번호 | 필드명 | 설명 |
|------|---------|------|
| 1 | **BIKE_ID** | 자전거 고유 ID |
| 2 | **RENT_DT** | 대여 일시 (YYYYMMDDHH24MISS 형식) |
| 3 | **RENT_ID** | 대여소 번호 |
| 4 | **RENT_NM** | 대여소 이름 |
| 5 | **RENT_HOLD** | 대여소 거치대 번호 |
| 6 | **RTN_DT** | 반납 일시 (YYYYMMDDHH24MISS 형식) |
| 7 | **RTN_ID** | 반납 대여소 번호 |
| 8 | **RTN_NM** | 반납 대여소 이름 |
| 9 | **RTN_HOLD** | 반납 거치대 번호 |
| 10 | **USE_MIN** | 이용 시간(분) |
| 11 | **USE_DST** | 이용 거리(M 단위) |
| 12 | **USR_CLS_CD** | 이용자 종류(정기권/일일권 등) |
| 13 | **SEX_CD** | 성별(1=남, 2=여 등) |
| 14 | **BIRTH_YEAR** | 출생 년도 |
| 15 | **RENT_STATION_ID** | 대여 대여소 ID (`ST-xxxx` 형식) |
| 16 | **RETURN_STATION_ID** | 반납 대여소 ID (`ST-xxxx` 형식) |
| 17 | **BIKE_SE_CD** | 자전거 구분 (일반형/전기식 등) |

---

## 📊 데이터 예시

| BIKE_ID | RENT_DT | RENT_ID | RENT_NM | RTN_DT | RTN_ID | USE_MIN | USE_DST |
|---------|---------|---------|---------|--------|--------|---------|----------|
| B12345 | 20200101083000 | 101 | 여의도역_1 | 20200101084200 | 202 | 12 | 1650 |
| B55782 | 20200101103000 | 203 | 강남역_3 | 20200101105500 | 105 | 25 | 3220 |

---

## 📌 분석 활용 포인트

### 1. **수요 예측 머신러닝 피처 생성**
- 대여/반납 시간 기반 시계열 패턴 추출
- 이동 거리/시간 기반 이용 강도 추정
- 특정 시간대별 주요 OD 패턴 파악

### 2. **OD(Origin–Destination) 흐름 분석**
- 인기 출발/도착 대여소 분석
- 시간대별 이동 경로 시각화(Flow map 가능)
- 네트워크 그래프 기반 중심성 분석

### 3. **자전거/대여소 운영 효율성 분석**
- 평균 회전율(turnover)
- 특정 대여소의 혼잡도(반납 불가/대여 불가 상황 예측)
- 대여 시간 대비 이동 거리로 비정상 이용 탐지

### 4. **사용자 특성 분석 (성별, 나이 등)**
- 성별/연령대별 이용 패턴 분석
- 사용자 유형(정기권/일일권 등) 기반 행동 분석

---

## 📌 생성 가능한 파생 컬럼 예시

| 파생 컬럼 | 설명 |
|-----------|------|
| `rent_hour`, `rtn_hour` | 대여/반납 시각의 시(hour) 값 |
| `weekday` | 대여일 기준 요일 |
| `trip_speed` | 평균 속도 = 거리(m) / 시간(min) |
| `age` | 대여 시점 기준 연령 |
| `same_station_flag` | 같은 대여소에서 대여/반납 여부 |

---

## 📁 데이터 구조 요약

이 API는 **가장 상세한 개별 이용기록 레벨**의 데이터이며,  
수요 예측 ML/딥러닝 프로젝트에서 가장 가치 있는 소스 중 하나입니다.