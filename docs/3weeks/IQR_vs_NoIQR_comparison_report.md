
# 🚲 IQR vs No-IQR 모델 성능 비교 종합 리포트

본 문서는 **IQR 적용 버전**과 **IQR 미적용(No‑IQR) 버전**의  
모델 학습 결과를 정량적으로 비교한 분석 보고서입니다.

---

# 📌 1. 분석 개요

두 버전 모두 다음 3개 모델을 학습함:

- **RandomForest**
- **XGBoost**
- **LightGBM**

비교 대상 도시:

- **Seoul**
- **Washington DC**

---

# 🇰🇷 2. Seoul 성능 비교

## ⭐ 주요 비교 요약

| 버전 | Best Model | Test RMSE ↓ | Test R² ↑ |
|------|------------|-------------|-----------|
| **IQR** | LightGBM | **6.007** | **0.762** |
| **No‑IQR** | LightGBM | **7.481** | **0.693** |

### 📌 해석
- IQR 버전이 **RMSE 1.47 감소**, **R² +0.069 상승**으로 확실한 우위.
- Seoul은 데이터가 정교하고 분포가 깔끔하기 때문에  
  **IQR 제거가 오히려 노이즈 제거 → 성능 향상** 효과를 가져옴.

---

# 🇰🇸 Seoul — 모델별 상세 비교

### 🔸 LightGBM
| 구분 | IQR | No‑IQR |
|------|------|---------|
| Train RMSE | 6.555 | 8.447 |
| Test RMSE | **6.007** | 7.481 |
| Test R² | **0.762** | 0.693 |

### 🔸 XGBoost
| 구분 | IQR | No‑IQR |
|------|------|---------|
| Test RMSE | 7.821 | 8.182 |
| Test R² | 0.596 | 0.633 |

> XGB는 오히려 No‑IQR에서 약간 더 높은 R²  
→ XGB는 노이즈에 비교적 강한 경향이 있음.

### 🔸 RandomForest
| 구분 | IQR | No‑IQR |
|------|------|---------|
| Test RMSE | 8.124 | 9.639 |
| Test R² | 0.564 | 0.491 |

> RF는 대규모 원본 데이터에서 성능 급락. (노이즈 영향 큼)

---

# 🇺🇸 3. Washington DC 성능 비교

## ⭐ 주요 비교 요약

| 버전 | Best Model | Test RMSE ↓ | Test R² ↑ |
|------|------------|-------------|-----------|
| **IQR** | LightGBM | **6.796** | **0.499** |
| **No‑IQR** | LightGBM | **6.002** | **0.558** |

### 📌 해석
- **DC는 No‑IQR 성능이 더 뛰어남 (RMSE ↓0.79, R² +0.059)**  
- 이유: DC의 원본 데이터는 원래 잡음·결측치·이상치가 매우 많음 →  
  너무 많은 IQR 제거(84%)로 학습 데이터가 지나치게 줄어들어 성능 저하 발생.

---

# 🇺🇸 Washington DC — 모델별 상세 비교

### 🔸 LightGBM
| 구분 | IQR | No‑IQR |
|------|------|---------|
| Test RMSE | 6.796 | **6.002** |
| Test R² | 0.499 | **0.558** |

### 🔸 XGBoost
| 구분 | IQR | No‑IQR |
|------|------|---------|
| Test RMSE | 6.828 | 6.069 |
| Test R² | 0.495 | 0.548 |

### 🔸 RandomForest
| 구분 | IQR | No‑IQR |
|------|------|---------|
| Test RMSE | 6.626 | 6.057 |
| Test R² | 0.524 | 0.550 |

> DC의 경우 **모든 모델이 No‑IQR이 더 좋음**  
→ 데이터가 원래 거칠고 다양성이 많아서 IQR이 오히려 과도한 손실 유발.

---

# 🧠 4. 주요 인사이트 정리

## ✔ Seoul — IQR 적용이 더 좋음
- 데이터 품질 높음 → IQR로 이상값 정리 효과적  
- LightGBM 기준 **RMSE 6.007 → 7.481 (No‑IQR)**  
- IQR 버전의 우세가 매우 명확함.

---

## ✔ Washington DC — No‑IQR이 더 좋음
- 원본 데이터의 분포가 매우 넓고, 노이즈도 다양  
- IQR 제거로 약 **84% 데이터 손실** 발생  
- 데이터 다양성 감소 → 모델 성능 하락  
- 결과적으로 No‑IQR 모델이 모든 지표에서 우세.

---

# 🏁 5. 최종 정리 (한눈에 보기)

| 도시 | 추천 버전 | 이유 |
|------|-----------|-------|
| **Seoul** | **IQR 적용** | 패턴이 명확, 이상치 제거가 성능 개선 |
| **Washington DC** | **No‑IQR** | IQR이 데이터 과소 제거 → 성능 하락 |

---

# 📁 이 파일은 SHAP 분석, 하이퍼파라미터 최적화, 앙상블 설계의 기초 리포트로 사용할 수 있습니다.

